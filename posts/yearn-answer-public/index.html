<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Marco Guaspari Worms">
<meta name="dcterms.date" content="2024-01-02">

<title>Worms Blog - Answering the public questions about Yearn Finance</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-fixed fullcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Worms Blog</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item compact">
    <a class="nav-link" href="https://twitter.com/MarcoWorms" rel="" target=""><i class="bi bi-twitter" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/MarcoWorms" rel="" target=""><i class="bi bi-github" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
</ul>
            <div class="quarto-navbar-tools">
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">Answering the public questions about Yearn Finance</h1>
                                <div class="quarto-categories">
                <div class="quarto-category">english</div>
                <div class="quarto-category">yearn</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Author</div>
      <div class="quarto-title-meta-contents">
               <p>Marco Guaspari Worms </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">January 2, 2024</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">




<blockquote class="blockquote">
<p>This article is not financial advice, it simply reflects my opinions around the Yearn protocol, always do your own research before investing in anything.</p>
</blockquote>
<blockquote class="blockquote">
<p>Disinformation about crypto ecossystems is rampant and this is my attempt to bring quality information on subjects that are hard to find answers for on Google.</p>
</blockquote>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://cdn-images-1.medium.com/max/2102/1*HUCyuoE4gsACGdqcBxjbBA.png" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">I recently found this website that shows top Google searches related to a theme (<a href="https://answerthepublic.com/">https://answerthepublic.com/</a>) and I wanted to do a fun exercise of answering all the top questions about Yearn!</figcaption>
</figure>
</div>
<section id="what-is-yearn-finance" class="level2">
<h2 class="anchored" data-anchor-id="what-is-yearn-finance">What is yearn finance?</h2>
<p>Taken straight from Yearn documentation:</p>
<blockquote class="blockquote">
<p>Yearn Finance is DeFi’s premier yield aggregator. Giving individuals, DAOs and other protocols a way to deposit digital assets and receive yield.</p>
</blockquote>
<blockquote class="blockquote">
<p>The protocol is maintained by various independent developers and is governed by YFI holders.</p>
</blockquote>
<p>But if you are not used to crypto, some words above might be scary so let’s break down what the above means:</p>
<blockquote class="blockquote">
<p>Yearn Finance is a product that exist in Decentralized Finance. It is a yield aggregator: “yield” means “profitable returns from an investment”, and “aggregator” means it aggregates many sources of investment (that generate yield).</p>
</blockquote>
<blockquote class="blockquote">
<p>Yearn not only aggregates them but also screens every possible yield opportunity through a a <a href="https://docs.yearn.finance/resources/risks/protocol-risks">risk framework</a>, and only lets users deposit in ones that pass quality criteria.</p>
</blockquote>
<blockquote class="blockquote">
<p>The Yearn Finance protocol is maintained by different people, most anonymous, and the group coordinates itself through a crypto coin called YFI, which is used as voting power in an open forum that can suggest new directions for Yearn products.</p>
</blockquote>
<ul>
<li>Yearn Website: <a href="https://yearn.fi">https://yearn.fi</a></li>
<li>Yearn Documentation: <a href="https://docs.yearn.finance/">https://docs.yearn.finance/</a></li>
</ul>
<p><em>This question is more deeply answered by the article “Yearn Finance Explained”: <a href="https://medium.com/iearn/yearn-finance-explained-what-are-vaults-and-strategies-96970560432">https://medium.com/iearn/yearn-finance-explained-what-are-vaults-and-strategies-9697056043</a></em></p>
</section>
<section id="is-yearn-finance-dead" class="level2">
<h2 class="anchored" data-anchor-id="is-yearn-finance-dead">Is Yearn Finance dead?</h2>
<p><strong>No!</strong> <strong>Yearn is more alive than ever!</strong></p>
<p>The best place to follow yearn activity is through twitter: <a href="https://twitter.com/yearnfi">https://twitter.com/yearnfi</a> (watch out for impostors! this is the only yearn account!)</p>
<p>You can also reach out to active community members through Discord: <a href="https://discord.gg/yearn">https://discord.gg/yearn</a></p>
<p>In 2023 alone Yearn has delivered many products like veYFI, yCRV, yPRISMA, yETH, and the new version of the core product Yearn Vaults V3. Developer chats are active and building is non-stop!</p>
<p>The rumor that “yearn is dead” comes from the departure of the initial developer (<a href="https://twitter.com/AndreCronjeTech">Andre Cronje</a>) from the team. Yearn is a big team today with dozens of people maintaining many parts of the yearn ecosystem, and Andre set out to work in other projects like <a href="https://fantom.foundation/">Fantom</a> and <a href="https://keep3r.network/">Keep3r</a>.</p>
<p>The Yearn creative lead <a href="undefined">draper</a> made a recent thread with all the videos we made for new releases for 2023, I highly recommend watching them! It’s fun!</p>
<p></p><div id="tweet-25742"></div><script>tweet={"url":"https:\/\/twitter.com\/draper0x\/status\/1741443589161312636","author_name":"draper","author_url":"https:\/\/twitter.com\/draper0x","html":"\u003Cblockquote class=\"twitter-tweet\" align=\"center\"\u003E\u003Cp lang=\"en\" dir=\"ltr\"\u003EWith nearly 200k views, the veYFI launch was one of our best performing films this year.\u003Cbr\u003E\u003Cbr\u003EYearn&#39;s long awaited tokenomics revamp was delayed multiple times, and we decided to make that unavoidable truth our core campaign idea.\u003Cbr\u003E\u003Cbr\u003E&lt;-Self deprecation maxi \uD83E\uDEE1\u003Ca href=\"https:\/\/t.co\/7rfHJNfdQ1\"\u003Ehttps:\/\/t.co\/7rfHJNfdQ1\u003C\/a\u003E\u003C\/p\u003E&mdash; draper (@draper0x) \u003Ca href=\"https:\/\/twitter.com\/draper0x\/status\/1741443589161312636?ref_src=twsrc%5Etfw\"\u003EDecember 31, 2023\u003C\/a\u003E\u003C\/blockquote\u003E\n\u003Cscript async src=\"https:\/\/platform.twitter.com\/widgets.js\" charset=\"utf-8\"\u003E\u003C\/script\u003E\n\n","width":550,"height":null,"type":"rich","cache_age":"3153600000","provider_name":"Twitter","provider_url":"https:\/\/twitter.com","version":"1.0"};document.getElementById("tweet-25742").innerHTML = tweet["html"];</script><p></p>
</section>
<section id="is-yearn-finance-a-good-investment" class="level2">
<h2 class="anchored" data-anchor-id="is-yearn-finance-a-good-investment">Is Yearn Finance a good investment?</h2>
<p>It depends! The issue with this question is that there are many ways take part in the yearn ecosystem, each has its pros and cons:</p>
<ul>
<li>You can deposit into one of the hundreds of existing yearn vaults.</li>
<li>You can lock YFI tokens and receive veYFI, which allows you to boost vault rewards and vote on where bought-back YFI will be sent.</li>
<li>You can participate in ETH staking through yETH</li>
</ul>
<p>For Yearn Vaults you can see how risk is assessed for each yield strategy in the yearn risk framework documentation: <a href="https://docs.yearn.finance/resources/risks/protocol-risks">https://docs.yearn.finance/resources/risks/protocol-risks</a></p>
</section>
<section id="is-yearn-finance-safe" class="level2">
<h2 class="anchored" data-anchor-id="is-yearn-finance-safe">Is Yearn Finance safe?</h2>
<p>It depends! There are many factors to consider because it depends on what you want to do and your risk tolerance. Depositing in Yearn Vaults or any other Yearn product contains layers of risks from different smart contracts.</p>
<p>Yearn does a diligence process in all yield strategies, and the people involved in this process are some of the best in the space to deal with Ethereum smart contract security, but security is an incredibly complex issue in DeFi due to the immutable nature of transactions and smart contracts (hacks can’t be undone).</p>
<p>The core product from Yearn (<a href="https://medium.com/iearn/yearn-finance-explained-what-are-vaults-and-strategies-96970560432">yVaults</a>) exists to abstract away all the security diligence process. The user can deposit in strategies that are vetted and optimized by simple deposit/withdrawing, which is a much more friendly interface than interacting with all DeFi protocols needed, but ultimately by doing this abstraction Yearn also introduces another set of risks, which is why users should always do their own research before interacting with DeFi protocols. Refer to Yearn documentation for a deep dive into risks:</p>
<ul>
<li><strong>Protocol Risks:</strong> <a href="https://docs.yearn.finance/resources/risks/protocol-risks">https://docs.yearn.finance/resources/risks/protocol-risks</a></li>
<li><strong>Vaults Risks:</strong> <a href="https://docs.yearn.finance/resources/risks/vault-risks">https://docs.yearn.finance/resources/risks/vault-risks</a></li>
<li><strong>Strategy Risks:</strong> <a href="https://docs.yearn.finance/resources/risks/strategy-risks">https://docs.yearn.finance/resources/risks/strategy-risks</a></li>
<li><strong>Risk Scores for vaults</strong>: <a href="https://docs.yearn.finance/resources/risks/risk-score">https://docs.yearn.finance/resources/risks/risk-score</a></li>
</ul>
</section>
<section id="how-does-yearn-finance-work" class="level2">
<h2 class="anchored" data-anchor-id="how-does-yearn-finance-work">How does yearn finance work?</h2>
<p>Yearn works through many pieces:</p>
<ul>
<li>You can use yearn products at <a href="https://yearn.finance/">https://yearn.fi/</a></li>
<li>Active developers use telegram groups to coordinate independent products, the biggest public group is <a href="https://t.me/yearnfinance">https://t.me/yearnfinance</a></li>
<li>There is an open community discord where people can reach out for support: <a href="https://discord.gg/yearn">https://discord.gg/yearn</a></li>
<li>There is an official Yearn GitHub where product are developed/maintained: <a href="https://github.com/yearn">https://github.com/yearn</a></li>
<li>Yearn products are a series of contracts deployed across many blockchains, you can check live addresses here: <a href="https://docs.yearn.finance/getting-started/products/addresses">https://docs.yearn.fi/getting-started/products/addresses</a></li>
<li>There is an open governance forum to propose things to be voted by veYFI holders: <a href="https://gov.yearn.fi/">https://gov.yearn.fi/</a></li>
<li>Governance votes happen on snapshot: <a href="https://snapshot.org/#/veyfi.eth">https://snapshot.org/#/veyfi.eth</a></li>
<li>Documentation is done at <a href="https://docs.yearn.finance/">https://docs.yearn.finance/</a></li>
</ul>
<p><em>If you are looking for how the core product of yearn “Yearn Vaults” work check the article “Yearn Finance Explained”: <a href="https://medium.com/iearn/yearn-finance-explained-what-are-vaults-and-strategies-96970560432">https://medium.com/iearn/yearn-finance-explained-what-are-vaults-and-strategies-9697056043</a></em></p>
</section>
<section id="when-was-yearn-finance-launched" class="level2">
<h2 class="anchored" data-anchor-id="when-was-yearn-finance-launched">When was yearn finance launched?</h2>
<p>According to one of the first posts made on Yearn Medium it was around 24th January 2020. The post was made on Feb 7 and says launch was 14 days ago:</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://cdn-images-1.medium.com/max/2000/1*_J3YP0odctH6GAvwyI0dqg.png" class="img-fluid figure-img"></p>
<figcaption class="figure-caption"><a href="https://medium.com/iearn/iearn-finance-milestones-and-roadmap-27fe63830951">https://medium.com/iearn/iearn-finance-milestones-and-roadmap-27fe63830951</a> (one of the first posts in yearn medium)</figcaption>
</figure>
</div>
</section>
<section id="why-is-yearn-finance-going-down-will-yearn-finance-go-up-again" class="level2">
<h2 class="anchored" data-anchor-id="why-is-yearn-finance-going-down-will-yearn-finance-go-up-again">Why is yearn finance going down? Will yearn finance go up again?</h2>
<p>This question is probably related to the price action of YFI, which contains many factors, not limited to but including: the price of Bitcoin, the price of Ethereum, the sentiment of the crypto community about original DeFi protocols, the chance of the bet that EVM smart contracts being the future of finance, and a gazillion other factors that are not necessarily tied to just the quality of Yearn’s deliverables or team.</p>
<p>The team is actively maintaining the protocol and delivering great new products despite the YFI price action. Also, with the introduction of veYFI there is more to be done with YFI, like boosting vaults rewards.</p>
</section>
<section id="where-to-stake-yearn-finance" class="level2">
<h2 class="anchored" data-anchor-id="where-to-stake-yearn-finance">Where to stake yearn finance?</h2>
<p>I interpret this question as “where to stake YFI to earn more YFI” and the answer is veYFI!</p>
<ul>
<li>veYFI website: <a href="https://yearn.fi/veyfi">https://yearn.fi/veyfi</a></li>
<li>veYFI docs: <a href="https://docs.yearn.finance/contributing/governance/veyfi">https://docs.yearn.finance/contributing/governance/veyfi</a></li>
</ul>
</section>
<section id="who-owns-yearn-finance" class="level2">
<h2 class="anchored" data-anchor-id="who-owns-yearn-finance">Who owns yearn finance?</h2>
<p>Yearn is a DAO (Decentralized Autonomous Organization) which means governance is fragmented between many parts.</p>
<p>YFI holders and the yearn teams plays a crucial role in ownership: YFI holders can vote for anything to happen on governance forums, but it would be extremely slow and inefficient, so yearn teams have autonomy to do changes but anything that can generate a greater impact the ecosystem is often put through vote in the governance forum. Here are some examples of how ownership is fragmented:</p>
<ul>
<li>Let’s say there is a bug on the website that makes a button vanish. Anyone can open a PR with a fix, it’s all open source, the frontend team from yearn will either fix themselves or accept a community fix. YFI holders do not need to be involved.</li>
<li>But if we want to change voting power dynamics and move from YFI to veYFI, we have to involve YFI holders in this decision and then put it to a vote.</li>
</ul>
<p>Ownership in a DAO is fragmented and Yearn tries to give autonomy to teams for execution and autonomy for YFI holders for strategy.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://cdn-images-1.medium.com/max/2526/1*LJRgqqEZ8yj8lWrQknyeDQ.png" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">Trust is one of yearn values, taken from <a href="https://yearn.love/">https://yearn.love/</a></figcaption>
</figure>
</div>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



<script src="https://platform.twitter.com/widgets.js"></script>
</body></html>